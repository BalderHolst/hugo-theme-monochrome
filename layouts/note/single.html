{{- define "content" -}}


<div class="hidden">
    {{ if .Site.Params.notes_preamble}}
    {{ $preamble:= .Site.Params.notes_preamble }}
    {{ if fileExists $preamble }}
    $$ {{ readFile $preamble }} $$
    {{ else }}
    <h1 style="background: yellow; color: red;"> Could not find preamble: {{ $preamble }}</h1>
    {{ end }}
    {{ end }}
</div>

{{ if .Params.tags }}
<ul class="note-tags">
    {{ range .Params.tags }}
    <li class="note-tag">#{{ . }}</li>
    {{ end }}
</ul>
{{ end }}

<div class="note">

    {{ if .Content }}
    <div class="content-margin">
        {{- partial "content.html" . -}}
    </div>
    {{ end }}


    {{if .Params.backlinks}}
    {{ $this := . }}
    {{ $root := .Parent.Path }}
    {{ $site := .Site }}
    <hr>
    <h3>Backlinks</h3>
    <ul>
        {{range .Params.backlinks}}
        {{ $page := (path.Join "/" $root . )}}
        <li><a href="{{ $page }}"> {{ with $site.GetPage $page }} {{.Title}} {{ end }}</a> </li>
        {{end}}
    </ul>
    {{end}}

</div>

<script>
    var coll = document.getElementsByClassName("cbox-button");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            console.log("hello!");
            this.classList.toggle("active");
            this.nextElementSibling.classList.toggle("hidden");
        });
    }
</script>

{{- end -}}
